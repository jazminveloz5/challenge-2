<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="componente2-challenge">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <h2>Hello [[prop1]]!</h2>
    <div class="encab">
        ToDo List by Iron Bit
        <button class="todo-remove-btn"><img src="https://firebasestorage.googleapis.com/v0/b/front-test-mitzy.appspot.com/o/recycle-bin.svg?alt=media&token=61978812-9a26-4902-87b1-3d73a869ee19" width="30rem" on-click="borrarTodo"></button>
    </div>

    <template is="dom-if" if="[[!collection.length]]">
        <div class="mensaje" style="background: white; border-radius: 0px 0px 6px 6px;">
            {{notodos}}
        </div>
    </template>

    <template is="dom-if" if="{{collection.length}}">
        <div class="todo-container">
            <template is="dom-repeat" items="{{collection}}" as="code">
                <div class="todolist">
                    {{code.descripcion}}
                    <button class="todo-remove-btn" on-click="borrar">
                        <img src="https://firebasestorage.googleapis.com/v0/b/front-test-mitzy.appspot.com/o/remove.svg?alt=media&token=bc2a1e0b-73d9-44f5-b9b4-8e7353ed7544" style="width: 28px;" class="trash-btn" id="remove">
                    </button>
                </div>
            </template>
    </div>
    </template>
  </template>

  <script>
    /**
     * `componente2-challenge`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class Componente2Challenge extends Polymer.Element {
      static get is() { return 'componente2-challenge'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'componente2-challenge'
          },
          collection: Array,
                    notodos: {
                        type: String,
                        value: "No hay ToDo's, tomate un café"
                    }
                };
            }

            borrar(e) {
                const item = e.target;
                const todo = item.parentElement;
                todo.remove();
                //todo.remove();
            }
            borrarTodo() {
                if (confirm("¿Estas seguro que deseas borrar toda la lista?")) {
                    localStorage.clear();
                    location.reload();
                }
            }
        }
    window.customElements.define(Componente2Challenge.is, Componente2Challenge);
  </script>
</dom-module>

